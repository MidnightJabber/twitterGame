var loginResponse;$.ajax({url:"php/social-media.php?query=get_homepage_response",type:"GET",async:!1,success:function(e){loginResponse=JSON.parse(e)}}),$(document).ready(function(){function e(){$(".statsColumn.column-1").animate({left:0},700),$(".statsColumn.column-3").animate({right:0},700);var e=$.map(O,function(e){return e}),n=1500;P&&(t(e,n,".value"),P=!1)}function n(){$(".profile .picture>*").eq(0).animate({left:0},500),$(".profile .picture>*").eq(1).animate({left:0},600),$(".profile .picture>*").eq(2).animate({left:0},700);var e=loginResponse.player_stats,n=[e.total_correct,e.total_incorrect,e.games_played,e.best_score],a=1500;G&&(setTimeout(function(){$(".infoLabel").empty().addClass("infoValue").removeClass("infoLabel"),$(".customPadding").removeClass("customPadding"),t(n,a,".infoValue")},3e3),G=!1)}function t(e,n,t){$(t).each(function(t){$(this).prop("Counter",0).animate({Counter:e[t]},{duration:n,easing:"swing",step:function(e){$(this).text(Math.ceil(e))}})})}function a(e,n,t){var a="";a='<table class="gameTable" style="display:none;">\n',a+="    <thead>\n",a+="        <tr>\n",a+="            <th>\nUser</th>\n",a+="            <th>\nTweet</th>\n",a+="        </tr>\n",a+="    </thead>\n",a+="    <tbody>\n",$.each(e[n],function(e,n){tweetHTML=twemoji.parse(n.tweetInfo.tweetHTML),a+="        <tr>\n",a+="            <td>\n",a+='                <div class="userCard">\n',a+='                    <div class="userImg">\n',a=a+'                        <a href="https://twitter.com/'+n.userInfo.handle.substring(1)+'" target="_blank"><img src="'+n.userInfo.profilePicURL+'"></a>\n',a+="                    </div>\n",a+='                    <div class="userInfo">\n',a=a+'                        <div class="userName">'+n.userInfo.name+"</div>\n",a=a+'                        <div class="userHandle">'+n.userInfo.handle+"</div>\n",a+="                    </div>\n",a=a+'                    <a class="followButton" href="'+n.userInfo.followURL+'" target="_blank">\n',a+='                        <span class="fa fa-twitter"></span>\n',a+='                        <p class="text">Follow</p>\n',a+="                    </a>\n",a+="                </div>\n",a+="            </td>\n",a+="            <td>\n",a+='                <div class="tweetCard">\n',a+=tweetHTML,a+="                </div>\n",a+="            </td>\n",a+="        </tr>\n"}),a+="    </tbody>\n",a+="</table>\n",$(t).append(a)}function o(e,n){if(q=e.find(".userInfo").find(".userHandle")[0].innerHTML.replace("@",""),N=n.parent("td").siblings("td").find(".userCard").find(".userInfo").find(".userHandle")[0].innerHTML.replace("@",""),Q[q].tweetInfo.tweetID==z[N].tweetInfo.tweetID){var t=$(".timer").TimeCircles().getTime(),a=$.Event("correct-selection");a.time=t,$("table").trigger("correct-selection"),A.toggleClass("correctSelection"),E.toggleClass("correctSelection"),J+=q,U+=N}else $("table").trigger("incorrect-selection"),A.toggleClass("incorrectSelection"),E.toggleClass("incorrectSelection"),A.toggleClass("shake shake-horzontal"),E.toggleClass("shake shake-horzontal");A.toggleClass("selectedCard"),E.toggleClass("selectedCard"),A=void 0,E=void 0,F=!1,D=!1}function s(e,n,t){var a=$.extend(!0,{},n),o=$.extend(!0,{},t);setTimeout(function(){a.toggleClass("correctSelectionAnimation"),o.toggleClass("correctSelectionAnimation")},e)}function i(e,n,t){var a=$.extend(!0,{},n),o=$.extend(!0,{},t);setTimeout(function(){a.toggleClass("incorrectSelection"),o.toggleClass("incorrectSelection"),a.toggleClass("shake shake-horzontal"),o.toggleClass("shake shake-horzontal")},e)}function l(e,n){console.log("consecutive bonus: "+50*n.num);var t=50+Math.floor(Math.pow(1.05,e)*V)+50*n.num,a=K;return K+=t,a=K-a,K}function r(){var e="";$.ajax({url:X,type:"POST",data:ee,dataType:"json",async:!1,beforeSend:function(e,n){(n.data!=$.param(ne)||K>18e3||j)&&e.abort()},success:function(e){},error:function(e,n,t){console.log("Error Occured")}}),e+='<div class="endInfo">',e+='    <div class="finalScore">',e=e+"        <p>Your Score:<span>"+K+"</span></p>",e+="    </div>",e+='    <div class="attempts">',e+='        <div class="correct">',e=e+"            <p>Correct Attempts: "+V+"</p>",e+="        </div>",e+='        <div class="incorrect">',e=e+"            <p>Incorrect Attempts: "+Y+"</p>",e+="        </div>",e+="    </div>",e+='    <div class="survey">',e+='        <a href="https://tweetysurvey.typeform.com/to/m1GIH1" target="_blank"><p>Please take our survey to make this game better</p></a>',e+="    </div>",e+='    <div class="buttons">',e+='        <button class="leaderboardButton">Leaderboard</button>',e+='        <button class="answersButton">Answers</button>',e+='        <button class="playAgain">Play Again</button>',e+="    </div>",e+='    <div class="leaderboard">',e+="    </div>",e+='    <div class="answerTable">',e+="    </div>",e+="</div>",$("body").append(e),c(5)}function c(e){var n;$.ajax({url:"http://tweety.midnightjabber.com/php/scoreQueries.php?query=get_top_players",type:"GET",async:!1,success:function(e){n=JSON.parse(e)}});var t="";t='<table class="leaderboardTable">\n',t+="    <thead>\n",t+="        <tr>\n",t+="            <th>\nRank</th>\n",t+="            <th>\nPlayer</th>\n",t+="            <th>\nName</th>\n",t+="            <th>\nScore</th>\n",t+="        </tr>\n",t+="    </thead>\n",t+="    <tbody>\n",$.each(n,function(e,n){var a=n.score==K;t+="        <tr",a&&(t+=' class="highlightPlayerRow"'),t+=">\n",t+="            <td>\n",a&&(t+='                <span class="fa fa-trophy"></span>\n'),t=t+'                <p class="rank">'+e+"</p>\n",t+="            </td>\n",t+="            <td>\n",t=t+'                <img class="playerImage hasLink" src="http://'+n.profilePic+'" data-link="http://'+n.link+'">\n',t+="            </td>\n",t+="            <td>\n",t=t+'                <p class="playerName hasLink" data-link="http://'+n.link+'">'+n.playerName+"</p>\n",t+="            </td>\n",t+="            <td>\n",t=t+'                <p class="leaderboardScore">'+n.score+"</p>\n",t+="            </td>\n",t+="        </tr>\n"}),t+="    </tbody>\n",t+="</table>\n",$(".leaderboard").append(t)}function d(e){var n=$(".timer").TimeCircles().getTime();if(n=Math.floor(n-e),0>=n){var t=$.Event("endGame");t._all=!1,t.timeLeft=0,$("body").trigger(t)}else $(".timer").data("timer",n).TimeCircles().restart()}function p(e){$(".timer").data("timer",e).TimeCircles({total_duration:e,count_past_zero:!1,use_background:!1,animation:"ticks",time:{Days:{show:!1},Hours:{show:!1},Minutes:{show:!1},Seconds:{text:"Seconds",color:"#00B200",show:!0}}}).start().addListener(function(e,n,t){var a;if(0==t){var o=$.Event("endGame");o._all=!1,o.timeLeft=t,$("body").trigger(o)}else 30>=t?a="#E60000":75>=t&&(a="#FFFF5C");$(".timer").TimeCircles({time:{Seconds:{color:a}}})})}function u(){var e="anonymous";_&&(e=loginResponse.fullname),ee.name=e,ne=ee}function f(){ee.timeRemaining=W,ne=ee}function g(){ee.score=K,ne=ee}function m(){ee.correct=V,ne=ee}function v(){ee.incorrect=Y,ne=ee}function h(){if(_){var e=loginResponse.player_id;ee.player_id=e,ne=ee}}function b(){if(_){var e=loginResponse.social_media;ee.social_media=e,ne=ee}}function w(){if(_){var e=loginResponse.gender;ee.gender=e,ne=ee}}function y(){if(_){var e=loginResponse.link;e=e.replace(/(https?:\/\/)/i,""),console.log(e),ee.profile_link=e,ne=ee}}function C(){if(_){var e=loginResponse.location;console.log(e),ee.location=e,ne=ee}}function T(){var e=ae[Math.floor(5*Math.random())];_&&(e=loginResponse.profile_pic,e=e.replace(/(https?:\/\/)/i,"")),ee.profile_pic=e,ne=ee}function k(){var e="";$.ajax({url:"http://jsonip.com?callback=",type:"GET",async:!1,success:function(n){e=n.ip,ee.ipAddress=e,ne=ee}})}var _=loginResponse.loggedIn,S=loginResponse.fb_login_url,I=loginResponse.twitter_login_url;if(_){var L="";L+='<div class="picture">\n',L=L+'    <img src="'+loginResponse.profile_pic+'" alt="">\n',L=L+'    <p><span class="name">'+loginResponse.fullname+'</span>\n<span class="fa fa-sign-out signOut" data-url="'+loginResponse.logout_url+'"></span></p>\n',L=L+'    <p><span class="rank">#'+loginResponse.player_stats.rank+"</span><p>\n",L+="</div>\n",L+='<div class="infoCard">\n',L+='    <table class="quadrants">\n',L+="        <tbody>\n",L+="            <tr>\n",L+="                <td>\n",L+='                    <p class="quadrant customPadding firstQuadrant total_correct">\n',L+='                        <span class="infoLabel">Total Correct</span>\n',L+="                    </p>\n",L+="                </td>\n",L+="                <td>\n",L+='                    <p class="quadrant customPadding secondQuadrant total_incorrect">\n',L+='                        <span class="infoLabel">Total Incorrect</span>\n',L+="                    </p>\n",L+="                </td>\n",L+="            </tr>\n",L+="            <tr>\n",L+="                <td>\n",L+='                    <p class="quadrant customPadding thirdQuadrant numGames">\n',L+='                        <span class="infoLabel"># Games</span>\n',L+="                    </p>\n",L+="                </td>\n",L+="                <td>\n",L+='                    <p class="quadrant customPadding fourthQuadrant bestScore">\n',L+='                        <span class="infoLabel">Best Score</span>\n',L+="                    </p>\n",L+="                </td>\n",L+="            </tr>\n",L+="        </tbody>\n",L+="    </table>\n",L+='    <div class="lastGameCard">\n',L+="        <u><h3>Last Game</h3></u>\n",L+='        <table class="lastGame">\n',L+="            <thead>\n",L+="                <tr>\n",L+="                    <th>Score</th>\n",L+="                    <th>Correct</th>\n",L+="                    <th>Incorrect</th>\n",L+="                </tr>\n",L+="            </thead>\n",L+="            <tbody>\n",L+="                <tr>\n",L=L+'                    <td class="lastScore">'+loginResponse.player_stats.last_game.score+"</td>\n",L=L+'                    <td class="lastCorrect">'+loginResponse.player_stats.last_game.num_correct+"</td>\n",L=L+'                    <td class="lastIncorrect">'+loginResponse.player_stats.last_game.num_incorrect+"</td>\n",L+="                </tr>\n",L+="            </tbody>\n",L+="        </table>\n",L+="    </div>\n",L+="</div>\n",$(".loginProfile").addClass("profile"),$(".profile").removeClass("loginProfile"),$(".profile").append(L)}else{var R='<span class="initialButton loginButton fa fa fa-user"></span>';$(".initialButtons").prepend(R);var x="";x+='<div class="loginOptions">\n',x=x+'    <span class="option facebook fa fa-facebook" data-url="'+S+'"></span>\n',x=x+'    <span class="option twitter fa fa-twitter" data-url="'+I+'"></span>\n',x+="</div>\n",console.log(x),$(".loginProfile").append(x.toString())}$(".loginOptions .option").on("click",function(e){window.location=$(this).data("url")}),$(".signOut").on("click",function(e){window.location=$(this).data("url")}),$(".initialButton.loginButton").on("click",function(e){$.fn.fullpage.moveTo($("#pageScroll .section").index($(".profileSection"))+1)}),$(".initialButtons").delay(500).fadeIn(2e3),$(".downArrow").delay(1500).fadeIn(1e3),$("#pageScroll").fullpage({navigation:!0,scrollingSpeed:600,touchSensitivity:1,onLeave:function(t,a,o){$(this);1==t&&"down"==o&&e();var s=$(".section").index($(".profileSection"))+1;a!=s||"down"!=o&&"up"!=o||!_||n()}}),$(".flipCard").flip();var H,O=loginResponse.homepage_stats,P=!0,G=!0,M=0,B=0,j=!1;$.ajax({url:"php/gameObject.php",type:"GET",async:!1,success:function(e){H=JSON.parse(e)}}),$(".startButton").on("click",function(e){$(document).trigger("startGame"),a(H,"incorrect",".addTableHere"),$(".gameTable").fadeIn("fast"),M=$.now()}),$(document).on("startGame",function(e){$("#pageScroll").remove(),$.fn.fullpage.destroy("all"),$("table").fadeIn("slow"),p(121)});var q,N,A,E,Q=H.correct,z=H.incorrect,F=!1,D=!1,J="",U="",V=0,Y=0,K=0,W=0,X="http://tweety.midnightjabber.com/php/scoreQueries.php?query=record_score",Z={flag:!1,num:-1,timeStamp:0};$(".linkOne").on("click",function(e){$(this).siblings(".imgOne").slideToggle("fast"),$(this).siblings(".imgTwo").hide()}),$(".linkTwo").on("click",function(){$(this).siblings(".imgTwo").slideToggle("fast"),$(this).siblings(".imgOne").hide()}),$(".addTableHere, body").on("click",".linkOne",function(e){$(this).siblings(".imgOne").slideToggle("fast"),$(this).siblings(".imgTwo").hide()}),$(".addTableHere, body").on("click",".linkTwo",function(){$(this).siblings(".imgTwo").slideToggle("fast"),$(this).siblings(".imgOne").hide()}),$("body").on("click",function(e){var n=e.target.localName;("body"==n||"td"==n)&&(void 0!=A&&(A.removeClass("selectedCard incorrectSelection"),A=void 0,F=!1),void 0!=E&&(E.removeClass("selectedCard incorrectSelection"),E=void 0,D=!1))}),$(".addTableHere").on("click",".userCard",function(e){var n=e.target.className,t=e.target.localName,a=$(this),s=a.find(".userInfo").find(".userHandle")[0].innerHTML.replace("@","");J.indexOf(s)>=0||t.indexOf("img")>=0||n.indexOf("followButton")>=0||(void 0==A?(A=$(this),A.toggleClass("selectedCard"),F=!0):a[0]===A[0]?(A.toggleClass("selectedCard"),A=void 0,F=!1):(A.toggleClass("selectedCard"),A=$(this),A.toggleClass("selectedCard"),F=!0),D&&o(A,E))}),$(".addTableHere").on("click",".tweetCard",function(e){var n=(e.target.className,$(this)),t=n.parent("td").siblings("td").find(".userCard").find(".userInfo").find(".userHandle")[0].innerHTML.replace("@","");U.indexOf(t)>=0||(void 0==E?(E=$(this),E.toggleClass("selectedCard"),D=!0):n[0]===E[0]?(E.toggleClass("selectedCard"),E=void 0,D=!1):(E.toggleClass("selectedCard"),E=$(this),E.toggleClass("selectedCard"),D=!0),F&&o(A,E))}),$(".addTableHere, .answerTable").on("click",".imgLink",function(e){e.stopPropagation()}),$(".addTableHere, .answerTable").on("click","td a",function(e){e.stopPropagation()}),$("body").on("incorrect-selection","table",function(e){d(10),$(".incorrectSound").trigger("play"),Y+=1,i(500,A,E),Z.flag=!1,Z.num=-1,Z.timeStamp=0}),$("body").on("correct-selection","table",function(e){if(V+=1,Z.flag=!0,Z.num=Z.num+1,Z.timeStamp=$(".timer").TimeCircles().getTime(),$(".correctSound").trigger("play"),s(0,A,E),10===V){var n=$.Event("endGame");n._all=!0,n.timeLeft=$(".timer").TimeCircles().getTime(),$("body").trigger(n)}var t=$(".timer").TimeCircles().getTime();$(".score").text(l(t,Z))}),$("body").on("endGame",function(e){B=$.now(),B-M>13e4&&(j=!0),W=Math.floor(e.timeLeft),K+=Math.floor(20*e.timeLeft),$("table").remove(),$(".timer").TimeCircles().destroy(),$(".timer").remove(),$(".score").remove(),u(),f(),g(),m(),v(),h(),b(),w(),y(),C(),k(),T(),r()});var ee={},ne={};$("body").on("click",".leaderboardTable .hasLink",function(e){console.log($(this)),window.open($(this).data("link"),"_blank")});var te=0;$("body").on("click",".answersButton",function(e){0===te&&(a(H,"correct",".answerTable"),te=1,$(".answerTable table").css("box-shadow","0 0 20px -5px rgba(0,0,0,0.2)")),$(".leaderboardTable").hide(),$(".answerTable table").fadeIn("slow"),$(".answerTable table thead th").empty()}),$("body").on("click",".leaderboardButton",function(e){$(".answerTable table").hide(),$(".leaderboardTable").fadeIn("slow")}),$("body").on("click",".playAgain",function(e){location.reload()}),$("body").on("click",".logoImg",function(e){location.reload()});var ae=["www.lovemarks.com/wp-content/uploads/profile-avatars/default-avatar-bad-werewolf.png","www.lovemarks.com/wp-content/uploads/profile-avatars/default-avatar-knives-ninja.png","www.lovemarks.com/wp-content/uploads/profile-avatars/default-avatar-foxy-fox.png","www.lovemarks.com/wp-content/uploads/profile-avatars/default-avatar-ponsy-deer.png","www.lovemarks.com/wp-content/uploads/profile-avatars/default-avatar-nerd-pug.png"]});