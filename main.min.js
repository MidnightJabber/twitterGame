$(document).ready(function(){function e(e,t,n){html='<table class="table">\n',html+="    <thead>\n",html+="        <tr>\n",html+="            <th>\nUser</th>\n",html+="            <th>\nTweet</th>\n",html+="        </tr>\n",html+="    </thead>\n",html+="    <tbody>\n",$.each(e[t],function(e,t){tweetHTML=twemoji.parse(t.tweetInfo.tweetHTML),html+="        <tr>\n",html+="            <td>\n",html+='                <div class="userCard">\n',html+='                    <div class="userImg">\n',html=html+'                        <a href="https://twitter.com/'+t.userInfo.handle.substring(1)+'" target="_blank"><img src="'+t.userInfo.profilePicURL+'"></a>\n',html+="                    </div>\n",html+='                    <div class="userInfo">\n',html=html+'                        <div class="userName">'+t.userInfo.name+"</div>\n",html=html+'                        <div class="userHandle">'+t.userInfo.handle+"</div>\n",html+="                    </div>\n",html=html+'                    <a class="followButton" href="'+t.userInfo.followURL+'" target="_blank">\n',html+='                        <span class="fa fa-twitter"></span>\n',html+='                        <p class="text">Follow</p>\n',html+="                    </a>\n",html+="                </div>\n",html+="            </td>\n",html+="            <td>\n",html+='                <div class="tweetCard">\n',html+=tweetHTML,html+="                </div>\n",html+="            </td>\n",html+="        </tr>\n"}),html+="    </tbody>\n",html+="</table>\n",$(n).append(html)}function t(e,t){b=e.find(".userInfo").find(".userHandle")[0].innerHTML.replace("@",""),w=t.parent("td").siblings("td").find(".userCard").find(".userInfo").find(".userHandle")[0].innerHTML.replace("@",""),k[b].tweetInfo.tweetID==y[w].tweetInfo.tweetID?($("table").trigger("correct-selection"),C.toggleClass("correctSelection"),T.toggleClass("correctSelection"),S+=b,x+=w):($("table").trigger("incorrect-selection"),C.toggleClass("incorrectSelection"),T.toggleClass("incorrectSelection"),C.toggleClass("shake shake-horzontal"),T.toggleClass("shake shake-horzontal")),C.toggleClass("selectedCard"),T.toggleClass("selectedCard"),C=void 0,T=void 0,I=!1,H=!1}function n(e,t,n){var o=$.extend(!0,{},t),a=$.extend(!0,{},n);setTimeout(function(){o.toggleClass("correctSelectionAnimation"),a.toggleClass("correctSelectionAnimation")},e)}function o(e,t,n){var o=$.extend(!0,{},t),a=$.extend(!0,{},n);setTimeout(function(){o.toggleClass("incorrectSelection"),a.toggleClass("incorrectSelection"),o.toggleClass("shake shake-horzontal"),a.toggleClass("shake shake-horzontal")},e)}function a(e){var t=50+Math.floor(Math.pow(1.05,e)*L),n=O;return O+=t,n=O-n,O}function l(){var e="";$.ajax({url:A,type:"POST",beforeSend:function(e,t){(t.url!=G||O>18e3||p)&&e.abort()},success:function(e){}}),e+='<div class="endInfo">',e+='    <div class="finalScore">',e=e+"        <p>Your Score:<span>"+O+"</span></p>",e+="    </div>",e+='    <div class="attempts">',e+='        <div class="correct">',e=e+"            <p>Correct Attempts: "+L+"</p>",e+="        </div>",e+='        <div class="incorrect">',e=e+"            <p>Incorrect Attempts: "+M+"</p>",e+="        </div>",e+="    </div>",e+='    <div class="survey">',e+='        <a href="https://tweetysurvey.typeform.com/to/m1GIH1" target="_blank"><p>Please take our survey to make this game better</p></a>',e+="    </div>",e+='    <div class="buttons">',e+='        <button class="answers">Answers</button>',e+='        <button class="playAgain">Play Again</button>',e+="    </div>",e+='    <div class="answerTable">',e+="    </div>",e+="</div>",$("body").append(e)}function s(e){var t=$(".timer").TimeCircles().getTime();if(t=Math.floor(t-e),0>=t){var n=$.Event("endGame");n._all=!1,n.timeLeft=0,$("body").trigger(n)}else $(".timer").data("timer",t).TimeCircles().restart()}function i(e){$(".timer").data("timer",e).TimeCircles({total_duration:e,count_past_zero:!1,use_background:!1,animation:"ticks",time:{Days:{show:!1},Hours:{show:!1},Minutes:{show:!1},Seconds:{text:"Seconds",color:"#00B200",show:!0}}}).start().addListener(function(e,t,n){var o;if(0==n){var a=$.Event("endGame");a._all=!1,a.timeLeft=n,$("body").trigger(a)}else 30>=n?o="#E60000":75>=n&&(o="#FFFF5C");$(".timer").TimeCircles({time:{Seconds:{color:o}}})})}function r(){A+="&name='anonymous'",G=A}function c(){A=A+"&timeRemaining="+_,G=A}function d(){A=A+"&score="+O,G=A}function m(){A=A+"&correct="+L,G=A}function g(){A=A+"&incorrect="+M,G=A}function f(){A=A+"&profile_pic='"+N[Math.floor(5*Math.random())]+"'",G=A}var u,h=0,v=0,p=!1;$.ajax({url:"php/gameObject.php",type:"GET",async:!1,success:function(e){u=JSON.parse(e)}}),$(".startButton").on("click",function(t){$(document).trigger("startGame"),e(u,"incorrect",".addTableHere"),h=$.now()}),$(document).on("startGame",function(e){$(".startButton").remove(),$(".guide").remove(),$("table").fadeIn("slow"),i(121)});var b,w,C,T,k=u.correct,y=u.incorrect,I=!1,H=!1,S="",x="",L=0,M=0,O=0,_=0,A="php/scoreQueries.php?query=record_score",G="";$(".linkOne").on("click",function(e){$(this).siblings(".imgOne").slideToggle("fast"),$(this).siblings(".imgTwo").hide()}),$(".linkTwo").on("click",function(){$(this).siblings(".imgTwo").slideToggle("fast"),$(this).siblings(".imgOne").hide()}),$(".addTableHere, body").on("click",".linkOne",function(e){$(this).siblings(".imgOne").slideToggle("fast"),$(this).siblings(".imgTwo").hide()}),$(".addTableHere, body").on("click",".linkTwo",function(){$(this).siblings(".imgTwo").slideToggle("fast"),$(this).siblings(".imgOne").hide()}),$("body").on("click",function(e){var t=e.target.localName;("body"==t||"td"==t)&&(void 0!=C&&(C.removeClass("selectedCard incorrectSelection"),C=void 0,I=!1),void 0!=T&&(T.removeClass("selectedCard incorrectSelection"),T=void 0,H=!1))}),$(".addTableHere").on("click",".userCard",function(e){var n=e.target.className,o=e.target.localName,a=$(this),l=a.find(".userInfo").find(".userHandle")[0].innerHTML.replace("@","");S.indexOf(l)>=0||o.indexOf("img")>=0||n.indexOf("followButton")>=0||(void 0==C?(C=$(this),C.toggleClass("selectedCard"),I=!0):a[0]===C[0]?(C.toggleClass("selectedCard"),C=void 0,I=!1):(C.toggleClass("selectedCard"),C=$(this),C.toggleClass("selectedCard"),I=!0),H&&t(C,T))}),$(".addTableHere").on("click",".tweetCard",function(e){var n=(e.target.className,$(this)),o=n.parent("td").siblings("td").find(".userCard").find(".userInfo").find(".userHandle")[0].innerHTML.replace("@","");x.indexOf(o)>=0||(void 0==T?(T=$(this),T.toggleClass("selectedCard"),H=!0):n[0]===T[0]?(T.toggleClass("selectedCard"),T=void 0,H=!1):(T.toggleClass("selectedCard"),T=$(this),T.toggleClass("selectedCard"),H=!0),I&&t(C,T))}),$(".addTableHere, .answerTable").on("click",".imgLink",function(e){e.stopPropagation()}),$(".addTableHere, .answerTable").on("click","td a",function(e){e.stopPropagation()}),$("body").on("incorrect-selection","table",function(e){s(10),$(".incorrectSound").trigger("play"),M+=1,o(500,C,T)}),$("body").on("correct-selection","table",function(e){if(L+=1,10===L){var t=$.Event("endGame");t._all=!0,t.timeLeft=$(".timer").TimeCircles().getTime(),$("body").trigger(t)}$(".correctSound").trigger("play"),n(0,C,T);var o=$(".timer").TimeCircles().getTime();$(".score").text(a(o))}),$("body").on("endGame",function(e){v=$.now(),v-h>13e4&&(p=!0),_=Math.floor(e.timeLeft),O+=Math.floor(20*e.timeLeft),$("table").remove(),$(".timer").TimeCircles().destroy(),$(".timer").remove(),$(".score").remove(),r(),c(),d(),m(),g(),f(),l()}),$("body").on("click",".answers",function(t){e(u,"correct",".answerTable"),$(".answers").remove(),$("table").css("box-shadow","0 0 30px -5px rgba(0,0,0,0.4)"),$("table").fadeIn("slow"),$("table thead th").empty()}),$("body").on("click",".playAgain",function(e){location.reload()}),$("body").on("click",".logoImg",function(e){location.reload()});var N=["www.lovemarks.com/wp-content/uploads/profile-avatars/default-avatar-bad-werewolf.png","www.lovemarks.com/wp-content/uploads/profile-avatars/default-avatar-knives-ninja.png","www.lovemarks.com/wp-content/uploads/profile-avatars/default-avatar-foxy-fox.png","www.lovemarks.com/wp-content/uploads/profile-avatars/default-avatar-ponsy-deer.png","www.lovemarks.com/wp-content/uploads/profile-avatars/default-avatar-nerd-pug.png"]});